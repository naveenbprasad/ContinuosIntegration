pipeline {
    agent any
    stages {
        stage('Build') {
            steps {
                echo 'Building the web application...'
                bat 'mvn clean package'
            }
        }

        stage('Deploy') {
            steps {
                echo 'Deploying the web application...'
                // Start a simple web server to serve the WAR file
                bat 'java -jar target/my-java-webapp-1.0-SNAPSHOT.war --server.port=8081 &'
            }
        }
          stage('Test') {
                    steps {
                        echo 'Running Selenium tests...'
                        // Run the Selenium tests
                        bat 'mvn test'
                    }
                }
    }
    post {
        success {
            echo 'Deployment successful! Access the application at http://localhost:8081/my-java-webapp/'
        }
        failure {
            echo 'Deployment failed. Check the logs for details.'
        }
    }
}
